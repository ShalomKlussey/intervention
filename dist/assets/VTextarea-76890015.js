import{p as Z,aD as ee,aE as ve,aF as te,g as ae,L as me,as as ne,aG as le,q as v,r as C,an as S,u as oe,aH as ue,aI as O,aJ as ie,b as l,aK as re,T as R,$ as b,aL as ge,aM as se,f as ce,aN as X,aC as U,aO as de,aP as xe,x as he,aQ as ye,y as Ve,aR as Ce,R as Y,ax as we,aS as Fe,A as ke,aq as Ie}from"./index-c8d845ea.js";const Pe=Z({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...ee({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>ve(e).every(k=>k!=null&&typeof k=="object")},...te({clearable:!0})},"VFileInput"),be=ae()({name:"VFileInput",inheritAttrs:!1,props:Pe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,k){let{attrs:p,emit:z,slots:o}=k;const{t:s}=me(),u=ne(e,"modelValue"),{isFocused:I,focus:j,blur:L}=le(e),$=v(()=>typeof e.showSize!="boolean"?e.showSize:void 0),H=v(()=>(u.value??[]).reduce((t,n)=>{let{size:a=0}=n;return t+a},0)),A=v(()=>X(H.value,$.value)),x=v(()=>(u.value??[]).map(t=>{const{name:n="",size:a=0}=t;return e.showSize?`${n} (${X(a,$.value)})`:n})),T=v(()=>{var n;const t=((n=u.value)==null?void 0:n.length)??0;return e.showSize?s(e.counterSizeString,t,A.value):s(e.counterString,t)}),w=C(),_=C(),d=C(),q=v(()=>I.value||e.active),E=v(()=>["plain","underlined"].includes(e.variant));function B(){var t;d.value!==document.activeElement&&((t=d.value)==null||t.focus()),I.value||j()}function J(t){F(t)}function h(t){z("mousedown:control",t)}function F(t){var n;(n=d.value)==null||n.click(),z("click:control",t)}function M(t){t.stopPropagation(),B(),U(()=>{u.value=[],de(e["onClick:clear"],t)})}return S(u,t=>{(!Array.isArray(t)||!t.length)&&d.value&&(d.value.value="")}),oe(()=>{const t=!!(o.counter||e.counter),n=!!(t||o.details),[a,c]=ue(p),[{modelValue:i,...f}]=O.filterProps(e),[P]=ie(e);return l(O,R({ref:w,modelValue:u.value,"onUpdate:modelValue":g=>u.value=g,class:["v-file-input",{"v-text-field--plain-underlined":E.value},e.class],style:e.style,"onClick:prepend":J},a,f,{centerAffix:!E.value,focused:I.value}),{...o,default:g=>{let{id:y,isDisabled:r,isDirty:V,isReadonly:N,isValid:K}=g;return l(re,R({ref:_,"prepend-icon":e.prependIcon,onMousedown:h,onClick:F,"onClick:clear":M,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},P,{id:y.value,active:q.value||V.value,dirty:V.value,disabled:r.value,focused:I.value,error:K.value===!1}),{...o,default:Q=>{var D;let{props:{class:W,...G}}=Q;return l(b,null,[l("input",R({ref:d,type:"file",readonly:N.value,disabled:r.value,multiple:e.multiple,name:e.name,onClick:m=>{m.stopPropagation(),N.value&&m.preventDefault(),B()},onChange:m=>{if(!m.target)return;const fe=m.target;u.value=[...fe.files??[]]},onFocus:B,onBlur:L},G,c),null),l("div",{class:W},[!!((D=u.value)!=null&&D.length)&&(o.selection?o.selection({fileNames:x.value,totalBytes:H.value,totalBytesReadable:A.value}):e.chips?x.value.map(m=>l(ge,{key:m,size:"small",color:e.color},{default:()=>[m]})):x.value.join(", "))])])}})},details:n?g=>{var y,r;return l(b,null,[(y=o.details)==null?void 0:y.call(o,g),t&&l(b,null,[l("span",null,null),l(se,{active:!!((r=u.value)!=null&&r.length),value:T.value},o.counter)])])}:void 0})}),ce({},w,_,d)}});const Se=Z({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...ee(),...te()},"VTextarea"),pe=ae()({name:"VTextarea",directives:{Intersect:xe},inheritAttrs:!1,props:Se(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,k){let{attrs:p,emit:z,slots:o}=k;const s=ne(e,"modelValue"),{isFocused:u,focus:I,blur:j}=le(e),L=v(()=>typeof e.counterValue=="function"?e.counterValue(s.value):(s.value||"").toString().length),$=v(()=>{if(p.maxlength)return p.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function H(a,c){var i,f;!e.autofocus||!a||(f=(i=c[0].target)==null?void 0:i.focus)==null||f.call(i)}const A=C(),x=C(),T=he(""),w=C(),_=v(()=>e.persistentPlaceholder||u.value||e.active);function d(){var a;w.value!==document.activeElement&&((a=w.value)==null||a.focus()),u.value||I()}function q(a){d(),z("click:control",a)}function E(a){z("mousedown:control",a)}function B(a){a.stopPropagation(),d(),U(()=>{s.value="",de(e["onClick:clear"],a)})}function J(a){var i;const c=a.target;if(s.value=c.value,(i=e.modelModifiers)!=null&&i.trim){const f=[c.selectionStart,c.selectionEnd];U(()=>{c.selectionStart=f[0],c.selectionEnd=f[1]})}}const h=C(),F=C(+e.rows),M=v(()=>["plain","underlined"].includes(e.variant));ye(()=>{e.autoGrow||(F.value=+e.rows)});function t(){e.autoGrow&&U(()=>{if(!h.value||!x.value)return;const a=getComputedStyle(h.value),c=getComputedStyle(x.value.$el),i=parseFloat(a.getPropertyValue("--v-field-padding-top"))+parseFloat(a.getPropertyValue("--v-input-padding-top"))+parseFloat(a.getPropertyValue("--v-field-padding-bottom")),f=h.value.scrollHeight,P=parseFloat(a.lineHeight),g=Math.max(parseFloat(e.rows)*P+i,parseFloat(c.getPropertyValue("--v-input-control-height"))),y=parseFloat(e.maxRows)*P+i||1/0,r=Ie(f??0,g,y);F.value=Math.floor((r-i)/P),T.value=ke(r)})}Ve(t),S(s,t),S(()=>e.rows,t),S(()=>e.maxRows,t),S(()=>e.density,t);let n;return S(h,a=>{a?(n=new ResizeObserver(t),n.observe(h.value)):n==null||n.disconnect()}),Ce(()=>{n==null||n.disconnect()}),oe(()=>{const a=!!(o.counter||e.counter||e.counterValue),c=!!(a||o.details),[i,f]=ue(p),[{modelValue:P,...g}]=O.filterProps(e),[y]=ie(e);return l(O,R({ref:A,modelValue:s.value,"onUpdate:modelValue":r=>s.value=r,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--plain-underlined":M.value},e.class],style:e.style},i,g,{centerAffix:F.value===1&&!M.value,focused:u.value}),{...o,default:r=>{let{isDisabled:V,isDirty:N,isReadonly:K,isValid:Q}=r;return l(re,R({ref:x,style:{"--v-textarea-control-height":T.value},onClick:q,onMousedown:E,"onClick:clear":B,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},y,{active:_.value||N.value,centerAffix:F.value===1&&!M.value,dirty:N.value||e.dirty,disabled:V.value,focused:u.value,error:Q.value===!1}),{...o,default:W=>{let{props:{class:G,...D}}=W;return l(b,null,[e.prefix&&l("span",{class:"v-text-field__prefix"},[e.prefix]),Y(l("textarea",R({ref:w,class:G,value:s.value,onInput:J,autofocus:e.autofocus,readonly:K.value,disabled:V.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:d,onBlur:j},D,f),null),[[we("intersect"),{handler:H},null,{once:!0}]]),e.autoGrow&&Y(l("textarea",{class:[G,"v-textarea__sizer"],id:`${D.id}-sizer`,"onUpdate:modelValue":m=>s.value=m,ref:h,readonly:!0,"aria-hidden":"true"},null),[[Fe,s.value]]),e.suffix&&l("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:c?r=>{var V;return l(b,null,[(V=o.details)==null?void 0:V.call(o,r),a&&l(b,null,[l("span",null,null),l(se,{active:e.persistentCounter||u.value,value:L.value,max:$.value},o.counter)])])}:void 0})}),ce({},A,x,w)}});export{be as V,pe as a};
